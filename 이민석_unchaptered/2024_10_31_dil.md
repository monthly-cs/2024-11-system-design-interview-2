~~6p 까지 읽음

⛳️ 세줄 평!

1. SOA* 기반의 아키텍처와 Monolithic 아키텍처가 혼용되어 있었습니다.
2. 데이터베이스의 RR*로 인한 일관성 문제에 대해서 다루지 않고 있습니다.
3. 복수의 Replica의 증감에 대해서 어떻게 단일 앤드포인트를 가질지 말하지 않고 있습니다.

### 2.2. 인프라에 대한 생각

앞서 [API 명세서에 대한 생각](./2024_10_29_dil.md#21-api-명세서에-대한-생각)에서 느꼈던 것처럼, <br>
이 도메인에서는 사업자와 소비자를 분리하여 생각해야 합니다.

따라서 사업자, 소비자의 서비스를 분리하는 것이 합리적입니다. <br>
이러한 구조는 MSA\*처럼 보이지만 개별 서비스 간의 통신은 전혀 없습니다. <br>
따라서 실제로는 SOA\*라고 보는 것이 합리적이라고 생각합니다.

> - MSA : Micorservices Architecture, 마이크로 서비스 아키텍처
> - SOA : Service Oriented Architectrue, 서비스 지향 아키텍처

다만 서비스가 분리된 것과 무관하게, <br>
데이터베이스는 단일 클러스터를 사용하였습니다. <br>
데이터베이스에서는 가용성을 보장하기 위해서 RR*을 적용해야 한다고 나와 있습니다.

#### 2.2.1. RR과 데이터 일관성

다만 이 구조에서 InnoDB를 사용하는 MySQL에서는 <br>
버퍼풀과 디스크 사이의 플러쉬(Flushing)의 간격과 <br>
개별 데이터베이스 인스턴스의 디스크 간의 싱크(Sync) 만큼의 오차가 발생합니다. 

최종 설계 부분에서 데이터 일관성(Data Consistency)에 대해서 생각해보겠습니다.


#### 2.2.2. 복수의 Replica에 대한 단일 앤드포인트

복수의 Replica Instance는 개별 Endpoint를 가지게 될 수 있습니다. <br>
이 경우에 어떻게 단일 Endpoint로 연결을 할 지에 대해서 솔루션이 필요합니다.

최종 설계 부문에서 DNS 파트 쪽에 대해서 생각해보겠습니다.